<!DOCTYPE html>
<html lang="en">
<head>
    <meta chartset="utf-8">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/css/bootstrap.min.css">
    <link rel="stylesheet" type="text/css" href="/stylesheets/style.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
</head>
<body>

    <!--Header-->
    <div id="header">
        <a href="https://www.rhinebecknyvillage.org/" target="_blank"><img id="seal" src="/images/seal.png"></a>
        <div id="websiteTitleDiv">
            <p id="title">A<span class="small-text">sher</span> D<span class="small-text">am</span> A<span class="small-text">lert</span>
                S<span class="small-text">ystem</span></p>
            <p id="subtitle">Flood Prevention Calculator</p>
        </div>
        <img id="logo" src="/images/logo.png">
    </div>

    <!--Content-->
    <div id="content">
        <!--Weather Selection Dropdown Menu-->
        <div id="dropdownDiv">
            <div id="dropdown" class="dropdown">
                <button class="btn btn-primary dropdown-toggle" type="button" data-toggle="dropdown">
                    Select Source
                    <span class="caret"></span>
                </button>
                <ul class="dropdown-menu">
                    <li><a>darksky.net</a></li>
                    <li><a>openweathermap.org</a></li>
                    <li><a>weather.gov</a></li>
                </ul>
            </div>
        </div>
        <!--Weather Data Cards-->
        <div id="weatherInfoDiv">
            <div id="precipitationCards">
                <div id="card1" class="card">
                    <div class="card-content">
                        <div id="day1" class="card-title">Today</div>
                        <div id="amount1" class="card-amount">1.5</div>
                        <div class="card-unit">cm</div>
                    </div>
                </div>
                <div id="card2" class="card">
                    <div class="card-content">
                        <div id="day2" class="card-title">Tomorrow</div>
                        <div id="amount2" class="card-amount">2.0</div>
                        <div class="card-unit">cm</div>
                    </div>
                </div>
                <div id="card3" class="card">
                    <div class="card-content">
                        <div id="day3" class="card-title">Wednesday</div>
                        <div id="amount3" class="card-amount">3.5</div>
                        <div class="card-unit">cm</div>
                    </div>
                </div>
                <div id="card4" class="card">
                    <div class="card-content">
                        <div id="day4" class="card-title">Thursday</div>
                        <div id="amount4" class="card-amount">0.5</div>
                        <div class="card-unit">cm</div>
                    </div>
                </div>
            </div>
            <!--Weather Response Cards-->
            <div id="calculatedInfoDiv">
                <div id="bigCard">
                    <div class="card-content">
                        <div class="card-title"><u>Discharge Volume</u></div>
                            <div id="dischargeMeasurement">
                                <span id="dischargeAmount">4500</span>
                                <span id="dischargeUnit">m<sup>3</sup></span>
                            </div>
                        <img id="warning" src="/resources/warning.png" title="Unusually high amount of rain predicted">
                    </div>
                </div>
                <div id="valveCard">
                    <div class="card-content">
                        <div class="card-title"><u>Valve Openings</u></div>
                        <div id="valveAmounts">
                            <p id="valve2">Open 2 valves <span id="hour1">6</span> hours</p>
                            <p id="valve3">Open 3 valves for <span id="hour2">3.5</span> hours</p>
                            <p id="valve4">Open 4 valves for <span id="hour3">2</span>  hours</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!--Footer-->
    <div id="footer">
        <button id="openEmailBtn" type="button" class="btn btn-primary" onclick="openModal(this)">Notifications</button>
        <div id="lastUpdate">Data last updated <span id="updateTime">13</span> hours ago</div>
        <button id="openThresholdBtn" type="button" class="btn btn-primary" onclick="openModal(this), getThresholds('/getThresholds', populateThresholds)">Thresholds</button> 
    </div>

<!--Extra materials-->    
    <!--Email Modal-->
    <div id="emailModal" class="modal">
            <div class="modal-content">
                <span class="close" onclick="clearInput(), closeModal(), swapEmailForm(true)">&times;</span>
                <p id="emailModalTitle" class="modal-title">Receive Notifications</p>
                <hr>
                <div id="emailError" class="input-error">
                        <div id="emailMessage">
                            Error! <span id="emailErrMsg"></span>
                        </div>
                </div>
                <form id="saveEmailForm" action="/saveEmail" method="POST">
                    <div id="emailModalInputs">
                        <div class="email-modal-input">
                            <label>First Name:</label>
                            <input type="text" placeholder="Johnny" class="form-control" id="fName" name="first_name">
                        </div>
                        <div class="email-modal-input">
                            <label>Last Name:</label>
                            <input type="text" placeholder="Appleseed" class="form-control" id="lName" name="last_name">
                        </div>
                        <div class="email-modal-input">
                            <label>Email:</label>
                            <input type="text" placeholder="test@example.com" class="form-control" id="emailToAdd" name="email_address">
                        </div>
                        <div class="email-modal-input">
                            <label>Phone Number:</label>
                            <input type="text" placeholder="7834591264" class="form-control" id="phone" name="phone_number">
                        </div>
                    </div>
                    <button id="emailSaveBtn" type="submit" value="Submit" class="btn btn-success modal-save" onclick="verifyNotification()">Add</button>
                </form>
                <button id="swapFormBtn" class="btn btn-warning modal-save" onclick="swapEmailForm()">Turn Off Notifications</button>
                <form id="removeEmailForm" action="/removeEmail" method="POST">
                    <div id="removalForm">
                        <div id="removeInput" class="email-modal-input">
                                <label>Email:</label>
                                <input type="text" placeholder="test@example.com" class="form-control" id="emailToRemove" name="email_address">
                        </div>
                        <button id="removeBtn" class="btn btn-danger" onclick="validateEmail()">Remove</button>
                    </div>
                </form>
            </div>
        </div>

        <!--Threshold Modal-->
        <div id="thresholdModal" class="modal">
            <div class="modal-content">
                <span class="close" onclick="clearInput(), closeModal(), swapThresholdForm(true)">&times;</span>
                <p id="thresholdModalTitle" class="modal-title">Set Thresholds</p>
                <hr>
                <div id="thresholdError" class="input-error">
                        <div id="thresholdMessage">
                            Error! <span id="threshErrMsg"></span>
                        </div>
                </div>
                <form id="saveThresholdForm" action="/saveThreshold" method="POST">
                    <div id="thresholdModalInputs">
                        <div class="threshold-modal-input">
                            <label>Stage 1:</label>
                            <input type="text" placeholder="1000" class="form-control" id="stage1" name="stage1">
                        </div>
                        <div class="threshold-modal-input">
                            <label>Stage 2:</label>
                            <input type="text" placeholder="2000" class="form-control" id="stage2" name="stage2">
                        </div>
                        <div class="threshold-modal-input">
                            <label>Stage 3:</label>
                            <input type="text" placeholder="3000" class="form-control" id="stage3" name="stage3">
                        </div>
                        <div class="threshold-modal-input">
                            <label>Stage 4:</label>
                            <input type="text" placeholder="4000" class="form-control" id="stage4" name="stage4">
                        </div>
                        <div class="threshold-modal-input">
                            <label>Stage 5:</label>
                            <input type="text" placeholder="5000" class="form-control" id="stage5" name="stage5">
                        </div>
                    </div>
                    <button id="thresholdSave" type="submit" value="Submit" class="btn btn-success modal-save" onclick="verifyThreshold()">Update</button>
                </form>
                <button id="viewStagesBtn" class="btn btn-info" onclick="swapThresholdForm()">View Current Stages</button>
                <div id="stagesTableDiv">
                    <table id="stagesTable" class="table table-striped">
                        <tr>
                            <td><b>Stage</b></td>
                            <td><b>Value</b></td>
                        </tr>
                        <tr>
                            <td>1</td>
                            <td id="stage1TD">1000</td>
                        </tr>
                        <tr>
                            <td>2</td>
                            <td id="stage2TD">2500</td>
                        </tr>
                        <tr>
                            <td>3</td>
                            <td id="stage3TD">3250</td>
                        </tr>
                        <tr>
                            <td>4</td>
                            <td id="stage4TD">4760</td>
                        </tr>
                        <tr>
                            <td>5</td>
                            <td id="stage5TD">5960</td>
                        </tr>
                    </table>
                </div>
            </div>
        </div>

        <!--Error Modal-->
        <div id="errorModal">
            <p>Enlarge view to access modals</p>
        </div>
        <div id="backdrop"></div>
</body>
<script src="/javascript/modal.js"></script>
<script src="/javascript/utils.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
</html>